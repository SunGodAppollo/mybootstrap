<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title></title>
	<link rel="stylesheet" href="css/bootstrap.min.css" />
	<link rel="stylesheet" href="css/layui.css" />
	<link rel="stylesheet" href="css/date.css" />
	<style media="screen">
	/*去掉圆角*/
	* {
    -webkit-border-radius: 0 !important;
    -moz-border-radius: 0 !important;
		     border-radius: 0 !important;
			 }
	</style>
</head>
<body>
	<nav class="navbar navbar-default">
	  <div class="container-fluid">
	    <!-- Brand and toggle get grouped for better mobile display -->
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
	        <span class="sr-only">Toggle navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </button>
	      <a class="navbar-brand" href="#">LOGO</a>
	    </div>

	    <!-- Collect the nav links, forms, and other content for toggling -->
	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	      <ul class="nav navbar-nav">
	        <li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li>
	        <li><a href="#">Link</a></li>
	        <li class="dropdown">
	          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
	          <ul class="dropdown-menu">
	            <li><a href="#">Action</a></li>
	            <li><a href="#">Another action</a></li>
	            <li><a href="#">Something else here</a></li>
	            <li role="separator" class="divider"></li>
	            <li><a href="#">Separated link</a></li>
	            <li role="separator" class="divider"></li>
	            <li><a href="#">One more separated link</a></li>
	          </ul>
	        </li>
	      </ul>
	      <form class="navbar-form navbar-left">
	        <div class="form-group">
	          <input type="text" class="form-control" placeholder="Search">
	        </div>
	        <button type="submit" class="btn btn-default">Search</button>
	      </form>
	      <ul class="nav navbar-nav navbar-right">
	        <li><a href="javascript:;" data-toggle="modal"  data-target="#myModal1">Login</a></li>
	      </ul>
	    </div><!-- /.navbar-collapse -->
	  </div><!-- /.container-fluid -->
	</nav>


	<div class="layui-container" style="padding: 15px;">
	  <div class="layui-row">
	    <div class="layui-col-md12">
	    <blockquote class="layui-elem-quote">基于layui的日历记事本</blockquote>
	    <div class="layui-inline" id="test-n2" ></div>
	    </div>
	  </div>
	</div>










	<div class="panel panel-success" style="position:fixed;bottom: 150px;right:20px;width:200px;">
	<div class="panel-heading" style="height:200px;">Msg</div>
	<div class="panel-body input-group">
		 <input type="text" class="form-control" placeholder="Recipient's username" aria-describedby="basic-addon2">
	<span class="input-group-addon" id="basic-addon2">Send</span>
	</div>
</div>

		<div style="position:absolute; bottom:0px;width:100%;text-align:center">
		<hr>
		foot
		</div>







	<!-- Modal -->
	<div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
					<ul class="nav nav-tabs" role="tablist">
				    <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">Login</a></li>
				    <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">SignUP</a></li>
				  </ul>
	      </div>


				<div class="tab-content">
			     <div role="tabpanel" class="tab-pane active" id="home">
						 <div class="modal-body">
							 <form>
										 <div class="form-group">
											 <label for="exampleInputEmail1">Name</label>
											 <input type="text" class="form-control" id="exampleInputEmail1" placeholder="Name">
										 </div>
										 <div class="form-group">
											 <label for="exampleInputPassword1">Password</label>
											 <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
										 </div>
										 <button type="submit" class="btn btn-default btn-block">SignUP</button>
						 </form>
						 </div>
					 </div>
			     <div role="tabpanel" class="tab-pane" id="profile">
						 <div class="modal-body">
							 <form>
										 <div class="form-group">
											 <label for="exampleInputEmail1">Name</label>
											 <input type="text" class="form-control" id="exampleInputEmail1" placeholder="Name">
										 </div>
										 <div class="form-group">
										 <label for="exampleInputEmail1">Phone</label>
										 <input type="text" class="form-control" id="exampleInputEmail1" placeholder="Phone">
									 </div>
										<div class="form-group">
											<label for="exampleInputPassword1">Password</label>
											<input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
										</div>

										<div class="form-group">
											<label for="exampleInputPassword1">AgainPassword</label>
											<input type="password" class="form-control" id="exampleInputPassword1" placeholder="AgainPassword">
										</div>
										 <button type="submit" class="btn btn-default btn-block">Sign</button>
						 </form>
						 </div>
					 </div>

			   </div>

	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>
	  </div>
	</div>









	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/layui.js"></script>
	<script type="text/javascript">


layui.use(['layer', 'form','jquery','laydate'], function() {
	var layer = layui.layer,
		$ = layui.jquery,
		laydate = layui.laydate,
		form = layui.form;




		//定义json
		var  data={};

		var new_date = new Date();
		loding_date(new_date ,data);


		//日历插件调用方法
		function loding_date(date_value,data){

		  laydate.render({
		    elem: '#test-n2'
		    ,type: 'date'
		    ,theme: 'grid'
		    ,max: '2099-06-16 23:59:59'
		    ,position: 'static'
		    ,range: false
		    ,value:date_value
		    ,calendar: true
		    ,btns:false
		    ,done: function(value, date, endDate){
		      console.log(value); //得到日期生成的值，如：2017-08-18
		      console.log(date); //得到日期时间对象：{year: 2017, month: 8, date: 18, hours: 0, minutes: 0, seconds: 0}
		      console.log(endDate); //得结束的日期时间对象，开启范围选择（range: true）才会返回。对象成员同上。
		      //layer.msg(value)

		      //调用弹出层方法
		      date_chose(value,data);

		    }
		   , mark:data//重要json！

		  });
		}



	  //获取隐藏的弹出层内容
	  var date_choebox = $('.date_box').html();

	  //定义弹出层方法
	  function date_chose(obj_date,data){
	      var index = layer.open({
	      type: 1,
	      skin: 'layui-layer-rim', //加上边框
	      title:'添加记录',
	      area: ['400px', 'auto'], //宽高
	      btn:['确定','撤销','取消'],
	      content: '<div class="text_box">'+
	      		'<form class="layui-form" action="">'+
	      		 '<div class="layui-form-item layui-form-text">'+
						     ' <textarea id="text_book" placeholder="请输入内容"  class="layui-textarea"></textarea>'+
						  '</div>'+
	      		'</form>'+
	      		'</div>'
	      ,success:function(){
	      		$('#text_book').val(data[obj_date])
	      	}
	      ,yes:function (){
	        //调用添加/编辑标注方法
	        if($('#text_book').val()!=''){
	        	 chose_moban(obj_date,data);
	        	layer.close(index);
	        }else{
	        	 layer.msg('不能为空', {icon: 2});
	        }

	      },btn2:function (){
	        chexiao(obj_date,data);
	      }
	    });
	  }





		//定义添加/编辑标注方法
		function chose_moban(obj_date,markJson){
		  //获取弹出层val
		  var chose_moban_val = $('#text_book').val();

		  $('#test-n2').html('');//重要！由于插件是嵌套指定容器，再次调用前需要清空原日历控件
		    //添加属性
		    markJson[obj_date] = chose_moban_val;
		    console.log(JSON.stringify(markJson));

		    //再次调用日历控件，
		    loding_date(obj_date,markJson);//重要！，再标注一个日期后会刷新当前日期变为初始值，所以必须调用当前选定日期。

		}


		//撤销选择
		function chexiao(obj_date,markJson){
		    //删除指定日期标注
		    delete markJson[obj_date];
		    console.log(JSON.stringify(markJson));
		    //原理同添加一致
		    $('#test-n2').html('');
		    loding_date(obj_date,markJson);

		}


});</script>

</body>
</html>
